spring.application.name=async-multithreading

# PGSQL - Configuração do banco de dados
spring.datasource.url=jdbc:postgresql://localhost:5432/interactions
spring.datasource.username=pgsql
spring.datasource.password=pgsql
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA Config para PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Para garantir que o DataLoader execute
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

# REDIS
spring.redis.host=localhost
spring.redis.port=6379

# VIRTUAL THREADS
spring.threads.virtual.enabled=true

# Logging - ajuste para ver mais detalhes
logging.level.com.github.reidn3r.async_multithreading=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

spring:
  datasource:
    hikari:
      maximum-pool-size: 20
      minimum-idle: 10
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        jdbc:
          batch_size: 100
          batch_versioned_data: true
        order_inserts: true
        order_updates: true
        cache:
          use_second_level_cache: false
          use_query_cache: false
    show-sql: false
